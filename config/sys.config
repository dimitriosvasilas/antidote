[
 %% Riak Core config
 {riak_core, [
              %% Default location of ringstate
              {ring_state_dir, "${RING_STATE_DIR}"},
              {platform_data_dir, "${PLATFORM_DATA_DIR}"},

              %% riak_handoff_port is the TCP port that Riak uses for
              %% intra-cluster data handoff.
              {handoff_port, 8099}
             ]},

 %% SASL config
 {sasl, [
         {sasl_error_logger, {file, "log/sasl-error.log"}},
         {errlog_type, error},
         {error_logger_mf_dir, "log/sasl"},      % Log directory
         {error_logger_mf_maxbytes, 10485760},   % 10 MB max file size
         {error_logger_mf_maxfiles, 5}           % 5 files max
         ]},

 {ranch, [
        {pb_ip, "${PB_IP}"},
        {pb_port, 8087}
        ]},

  {prometheus, [{collectors, [prometheus_process_collector, default]}]},

  {antidote, [
    {pubsub_port, 8086},
    {logreader_port, 8085},
    {metrics_port, 3001}
  ]},
   {grpcbox, [{client, #{channels => [{default_channel, [{http, "localhost", 8080, []}],
                                     #{%% stats_handler => grpcbox_oc_stats_handler
                                      }}]}},
            {servers,
             [#{grpc_opts => #{service_protos => [route_guide_pb, grpcbox_health_pb, grpcbox_reflection_pb, log_propagate_pb],
                               services => #{'logpropagate.AntidoteDataStore' => logpropagate_antidote_data_store_service,
					     'routeguide.RouteGuide' => routeguide_route_guide,
                                             'grpc.health.v1.Health' => grpcbox_health_service,
                                             'grpc.reflection.v1alpha.ServerReflection' =>
                                                 grpcbox_reflection_service},
                               %% stats_handler => grpcbox_oc_stats_handler,
                               client_cert_dir => "test/grpcbox_SUITE_data/certificates/clients"},

                transport_opts => #{ssl => false,
                                    keyfile => "test/grpcbox_SUITE_data/certificates/localhost.key",
                                    certfile => "test/grpcbox_SUITE_data/certificates/localhost.crt",
                                    cacertfile => "test/grpcbox_SUITE_data/certificates/My_Root_CA.crt"},

                listen_opts => #{port => 8080,
                                 ip => {0,0,0,0}},

                pool_opts => #{size => 10},

                server_opts => #{header_table_size => 4096,
                                 enable_push => 1,
                                 max_concurrent_streams => unlimited,
                                 initial_window_size => 65535,
                                 max_frame_size => 16384,
                                 max_header_list_size => unlimited}}]}]
 },

 {opencensus, [{sampler, {oc_sampler_always, []}},
               {reporters, [{oc_reporter_stdout, []}]},

               {stat, [{exporters, [{oc_stat_exporter_stdout, []}]}]}]}
].
